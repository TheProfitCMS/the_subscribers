%h1= t('.title')
%li= link_to t('.link_new'), new_subscriber_path
%li= link_to "Полный список",   full_list_subscribers_path
%li= link_to "Список активных", active_list_subscribers_path

- content_for :full_width do
  = paginate @subscribers

  %table.table.table-condensed.table-hover
    %thead
      %tr
        %th= t('.email')
        %th= t('.unsubscribe_link')
        %th= t('.created_at')
        %th= t('.updated_at')
        %th= t('.manage')
    %tbody
      - @subscribers.each.with_index do |subscriber, i|
        %tr{ class: state_color( subscriber.state_name ) }
          %td
            %p{ title: t(".#{ subscriber.state }") }= subscriber.email

          %td= content_tag :button, "Link", type: 'submit', class: 'unsubscribe_button', 'data-title' => t('.unsubscribe_button.title'), 'data-text' => unsubscribe_url(crypt(subscriber.email))

          %td= subscriber.created_at.strftime('%d.%m.%Y')
          %td= subscriber.updated_at.strftime('%d.%m.%Y')

          %td
            = link_to 'Просмотр', subscriber_path(subscriber)
            = link_to 'Правка', edit_subscriber_path(subscriber)
            = link_to 'Удалить', subscriber_path(subscriber), method: :delete, data: { confirm: 'Are you sure?' }

  = paginate @subscribers
